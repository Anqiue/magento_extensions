<?xml version="1.0"?>
<config>
	<modules>
		<Diglin_Username>
			<version>1.2.1</version>
		</Diglin_Username>
	</modules>

	<global>
        <fieldsets>
            <customer_account>
                <username><create>1</create><update>1</update><to_order>customer_username</to_order><to_quote>customer_username</to_quote></username>                
            </customer_account>
            <checkout_onepage_billing>
            	<username><to_customer>*</to_customer></username>
            </checkout_onepage_billing>
            <checkout_onepage_quote>
            	<customer_username><to_customer>username</to_customer></customer_username>
            </checkout_onepage_quote>
			<sales_convert_quote>
                <customer_username><to_order>*</to_order></customer_username>
            </sales_convert_quote>
			<sales_convert_quote_address>
            	<username><to_order_address>*</to_order_address><to_customer_address>*</to_customer_address></username>
            </sales_convert_quote_address>
            <sales_convert_order>
                <customer_username><to_quote>*</to_quote></customer_username>
            </sales_convert_order>
        </fieldsets>

		<blocks>
			<adminhtml>
				<rewrite>
					<customer_edit_tab_account>Diglin_Username_Block_Overwrite_Adminhtml_Edit_Tab_Account</customer_edit_tab_account>
				</rewrite>
			</adminhtml>
		</blocks>        
		<models>
			<customer>
				<rewrite>
					<customer>Diglin_Username_Model_Customer</customer>
					<form>Diglin_Username_Model_Form</form>
					<observer>Diglin_Username_Model_Observer</observer>
					<setup>Diglin_Username_Model_Setup</setup>
				</rewrite>
			</customer>
			<customer_entity>
				<rewrite>
					<customer>Diglin_Username_Model_Entity_Customer</customer>
				</rewrite>
			</customer_entity>
			<customer_resource>
				<rewrite>
					<customer>Diglin_USername_Model_Entity_Customer</customer>
				</rewrite>
			</customer_resource>
		</models>
	
		<resources>
			<username_setup>
				<setup>
					<module>Diglin_Username</module>
					<class>Diglin_Username_Model_Entity_Setup</class>
				</setup>
				<connection>
					<use>default_setup</use>
				</connection>
			</username_setup>
		</resources>
		
		<events>
			<customer_customer_authenticated>
				<observers>
					<customer_observer>
						<type>singleton</type>
						<class>customer/observer</class>
						<method>isActive</method>
					</customer_observer>
				</observers>
			</customer_customer_authenticated>
		</events>
	</global>
	
	<frontend>
		<translate>
			<modules>
				<Diglin_Username>
					<files>
						<default>Diglin_Username.csv</default>
					</files>
				</Diglin_Username>
			</modules>
		</translate>
		<layout>
			<updates>
				<username>
					<file>username.xml</file>
				</username>
			</updates>
		</layout>
	</frontend>
</config>
